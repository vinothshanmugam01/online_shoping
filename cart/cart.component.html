<app-navbar></app-navbar>
<main class="container_ACTIVE mt-5 mb-5">
  <h2>Shopping Cart</h2>
  <div class="table-responsive" *ngIf="cartItems.length > 0">
    <table class="table table-striped">
      <thead>
        <tr>
          <th>Image</th>
          <th>Product</th>
          <th>Price</th>
          <th>Quantity</th>
          <th>Total</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of cartItems">
          <td>
            <img [src]="item.pdImg ? 'http://localhost:3000/uploads/' + item.pdImg : '/assets/images/placeholder.jpg'" alt="{{item.pdName}}" style="width: 50px;">
          </td>
          <td>{{item.pdName}}</td>
          <td>{{item.pdPrice | currency:'INR'}}</td>
          <td>
            <button class="btn btn-sm btn-outline-secondary" (click)="updateQuantity(item, -1)">-</button>
            <span class="mx-2">{{item.plusMinusCounter || 1}}</span>
            <button class="btn btn-sm btn-outline-secondary" (click)="updateQuantity(item, 1)">+</button>
          </td>
          <td>{{(item.pdPrice * (item.plusMinusCounter || 1)) | currency:'INR'}}</td>
          <td>
            <button class="btn btn-sm btn-danger" (click)="removeItem(item)">Remove</button>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="text-end">
      <h4>Total: {{totalPrice | currency:'INR'}}</h4>
      <button class="btn btn-primary" (click)="placeOrder()">Place Order</button>
    </div>
  </div>
  <p class="text-center" *ngIf="cartItems.length === 0">Your cart is empty.</p>
</main>